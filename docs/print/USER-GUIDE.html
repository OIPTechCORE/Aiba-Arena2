<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>USER GUIDE — Aiba Arena Docs</title>
  <link rel="stylesheet" href="../print.css"/>
</head>
<body>
  <div class="doc-header">
    <h1>USER GUIDE</h1>
    <p class="doc-meta no-print"><a href="index.html">← All docs</a></p>
  </div>
  <div class="doc-body">
<h1>AIBA Arena — User Guide</h1>
<p>This guide walks you through <strong>how to play</strong> AIBA Arena: from opening the app to earning NEUR and AIBA and withdrawing AIBA to your TON wallet.</p>
<hr/>
<h2>1. Opening the Game</h2>
<ul>
<li><strong>Requirements:</strong> Telegram account; optionally a TON wallet (TonConnect) if you want to withdraw AIBA on-chain.</li>
<li><strong>First time:</strong> The app may show “Backend: …” at the top; that’s for developers. You’ll see a <strong>TonConnect</strong> button and sections for brokers, arena, battle, economy, guilds, referrals, and claims.</li>
</ul>
<hr/>
<h2>2. Connect Your Wallet (Recommended)</h2>
<ul>
<li>- Save your progress (linked to Telegram + wallet).</li>
<li>- <strong>Withdraw AIBA</strong> on-chain: claims are tied to your wallet; you send one transaction to the vault to receive AIBA jettons.</li>
<li><strong>How:</strong></li>
<li>1. Tap <strong>TonConnect</strong> (or “Connect wallet”).</li>
<li>2. Choose your TON wallet (e.g. Tonkeeper, Telegram Wallet).</li>
<li>3. Approve the connection in the wallet.</li>
<li><strong>Result:</strong> The app shows “Wallet connected.” The backend stores your address for claims. If you don’t connect, you can still play and earn NEUR/AIBA credits, but you won’t be able to withdraw AIBA to the chain until you connect.</li>
</ul>
<hr/>
<h2>3. Get Your First Broker</h2>
<ul>
<li><strong>Steps:</strong></li>
<li>1. Tap <strong>Create starter broker</strong>.</li>
<li>2. Wait for “Refresh brokers” to finish (or tap it once).</li>
<li>3. In <strong>My brokers</strong>, you should see one broker (e.g. “#… | INT 50 SPD 50 RISK 50 | energy 10”).</li>
<li><strong>Tip:</strong> You can have multiple brokers later; for now one is enough. Select it in the <strong>My brokers</strong> dropdown before every battle.</li>
</ul>
<hr/>
<h2>4. Choose Arena and Run a Battle</h2>
<ul>
<li>- <strong>prediction</strong> — favors Intelligence.</li>
<li>- <strong>simulation</strong> — more balanced.</li>
<li>- <strong>strategyWars</strong> — more Risk.</li>
<li>- <strong>guildWars</strong> — requires guild membership; rewards split with guild.</li>
<li><strong>League:</strong> The app typically uses <strong>rookie</strong> by default. Pro/elite may require higher broker level and cost more energy/cooldown.</li>
<li><strong>Run a battle:</strong></li>
<li>1. Select <strong>one broker</strong> in My brokers.</li>
<li>2. Select <strong>arena</strong> (and league if shown).</li>
<li>3. Tap <strong>Run battle</strong>.</li>
<li>4. Wait a moment; you’ll see <strong>Battle result</strong> with <strong>Score</strong> and <strong>Reward AIBA (credits)</strong>.</li>
<li><strong>Limits:</strong></li>
<li>- <strong>Energy:</strong> Each battle costs energy (e.g. 10–20 per battle). Energy regenerates over time (e.g. 1 per minute, cap 100). If you see “no energy,” wait or try again later.</li>
<li>- <strong>Cooldown:</strong> After a battle in an arena, you must wait (e.g. 30–60 seconds) before the next battle in that same arena/mode.</li>
<li><strong>Optional:</strong> Check <strong>Auto-claim AIBA on battle</strong> if you want the server to prepare a claim right after the battle so you can withdraw that battle’s AIBA in one step (see section 7).</li>
</ul>
<hr/>
<h2>5. Balances (NEUR and AIBA Credits)</h2>
<ul>
</ul>
<p><strong>Balances — NEUR: … | AIBA credits: …</strong></p>
<ul>
<li><strong>AIBA credits:</strong> Off-chain “credits” that represent withdrawable AIBA. You earn them from battles. To get <strong>real AIBA</strong> in your TON wallet, you must <strong>create a claim</strong> and then <strong>Claim on-chain</strong> (see section 7).</li>
<li><strong>Refreshing:</strong> Balances update after battles and after claims. If the number looks stale, run another battle or use “Create claim” / “Claim on-chain” and the UI will refresh.</li>
</ul>
<hr/>
<h2>6. Guilds (Optional)</h2>
<ul>
<li><strong>My guilds:</strong></li>
<li>- Tap <strong>Refresh my guilds</strong> to load your memberships.</li>
<li>- In the <strong>My guilds</strong> dropdown you’ll see guild name, member count, and vault NEUR.</li>
<li><strong>Create a guild:</strong></li>
<li>1. Enter <strong>Name</strong> (e.g. 3–24 characters) and optional <strong>Bio</strong>.</li>
<li>2. Tap <strong>Create</strong>.</li>
<li>3. Refresh my guilds; select the new guild.</li>
<li><strong>Join a guild:</strong></li>
<li>1. Get the <strong>Guild ID</strong> from someone (e.g. from the guild’s invite).</li>
<li>2. Paste it into <strong>Join guild</strong> and tap <strong>Join</strong>.</li>
<li><strong>Deposit / withdraw broker:</strong></li>
<li>- Select a <strong>guild</strong> and a <strong>broker</strong>, then tap <strong>Deposit selected broker</strong> to put that broker in the guild pool (for guild wars).</li>
<li>- Tap <strong>Withdraw selected broker</strong> to take it back to “yours.”</li>
<li><strong>Guild Wars:</strong> To play <strong>guildWars</strong> arena you must be in a guild. Part of the NEUR reward goes to the guild treasury (e.g. 20%); the rest to you.</li>
</ul>
<hr/>
<h2>7. Withdrawing AIBA to Your Wallet (On-Chain Claim)</h2>
<p>To turn <strong>AIBA credits</strong> into <strong>real AIBA jettons</strong> in your TON wallet:</p>
<ul>
<li>- Wallet <strong>connected</strong> (TonConnect).</li>
<li>- Backend and vault configured (ARENA_VAULT_ADDRESS, AIBA_JETTON_MASTER, ORACLE_PRIVATE_KEY_HEX, TON provider). If not, “Create claim” or “Claim on-chain” may fail or show a message about backend config.</li>
<li><strong>Two ways:</strong></li>
</ul>
<h3>7.1 Auto-claim after a battle</h3>
<ol>
<li>Run a battle (with a connected wallet and enough AIBA credits from that battle).</li>
<li>If the backend returns a claim, you’ll see <strong>On-chain claim</strong> with vault, amount, seqno, validUntil.</li>
<li>Tap <strong>Claim on-chain (TonConnect)</strong>.</li>
<li>Your wallet opens: confirm sending the transaction to the <strong>vault</strong> (you pay a small TON fee for gas; the vault sends AIBA to you).</li>
<li>Wait for confirmation; the app may poll and show “Claim confirmed on-chain.”</li>
</ol>
<h3>7.2 Create claim manually, then claim on-chain</h3>
<ol>
<li>In <strong>On-chain claim</strong>, in the “Create a claim” section:</li>
<li>- Optionally enter an <strong>Amount</strong> (blank = all your AIBA credits).</li>
<li>- Tap <strong>Create claim</strong>.</li>
<li>You’ll see vault, to, amount, seqno, validUntil (and the backend stores the signed claim).</li>
<li>Tap <strong>Claim on-chain (TonConnect)</strong>.</li>
<li>Confirm in your wallet (you send one tx to the vault; the vault sends AIBA to your address).</li>
<li>Wait for “Claim confirmed on-chain” (or use <strong>Check claim status</strong> if the app offers it).</li>
</ol>
<ul>
<li>- The <strong>connected wallet</strong> must match the claim’s <strong>to</strong> address. If you changed wallets, reconnect the correct one.</li>
<li>- Claims have a <strong>validUntil</strong> time (e.g. 10 minutes). If it expires, create a new claim (e.g. run another battle or create claim again).</li>
<li>- If you see “Vault inventory too low” or “Vault has insufficient TON,” the project needs to top up the vault; you can try again later.</li>
</ul>
<hr/>
<h2>8. Marketplace (Create Broker, List, Buy)</h2>
<p>The <strong>Market</strong> tab is the unified marketplace. All payments here are in <strong>TON</strong> (to create a broker) or <strong>AIBA</strong> (to list and buy brokers). See <a href="MARKETPLACE-AND-PAYMENTS-MASTER-PLAN.md">MARKETPLACE-AND-PAYMENTS-MASTER-PLAN.md</a> for the full plan.</p>
<h3>8.1 Create your broker with TON</h3>
<ul>
<li><strong>Where:</strong> Market tab → <strong>Create your broker (pay TON)</strong> card (shown only when the feature is configured).</li>
<li><strong>Steps:</strong></li>
<li>1. Note the <strong>cost</strong> (e.g. 1–10 TON; set by admins).</li>
<li>2. Send that exact amount of TON to the <strong>wallet address</strong> shown or communicated by the project (Super Admin “Created Brokers” wallet).</li>
<li>3. After the transaction confirms, copy the <strong>transaction hash</strong> (tx hash).</li>
<li>4. Paste the tx hash into the input and tap <strong>Create broker</strong>.</li>
<li><strong>Result:</strong> A new broker is created and listed on the marketplace at the default AIBA price. Everyone can see it; you appear as the seller.</li>
<li><strong>Tip:</strong> If you see “txHash already used,” that payment was already applied. Use a new TON payment for another broker.</li>
</ul>
<h3>8.2 List and buy brokers (AIBA)</h3>
<ul>
<li><strong>Buy:</strong> Browse <strong>listings</strong> and tap <strong>Buy</strong> on a listing. You pay in <strong>AIBA</strong>; the broker is transferred to you. Your AIBA balance is debited.</li>
<li><strong>Refresh:</strong> Tap <strong>Refresh</strong> to load the latest listings.</li>
</ul>
<hr/>
<h2>9. Boost your profile</h2>
<ul>
<li><strong>Where:</strong> Wallet tab → <strong>Boost your profile</strong> card (shown when the feature is configured).</li>
<li><strong>Steps:</strong></li>
<li>1. Note the <strong>cost</strong> (e.g. 1–10 TON).</li>
<li>2. Send that amount of TON to the project’s <strong>Boost Profile</strong> wallet.</li>
<li>3. Paste the <strong>transaction hash</strong> and tap <strong>Boost profile</strong>.</li>
<li><strong>Result:</strong> Your profile is boosted until the configured end date. The Profile card shows “Profile boosted until &amp;lt;date&amp;gt;.”</li>
</ul>
<hr/>
<h2>10. Gifts</h2>
<ul>
<li><strong>Where:</strong> Wallet tab → <strong>Gifts</strong> card.</li>
<li><strong>Send a gift:</strong></li>
<li>1. Enter the recipient: <strong>Telegram ID</strong> (numeric) or <strong>@username</strong>.</li>
<li>2. Note the <strong>cost</strong> (e.g. 1–10 TON per gift).</li>
<li>3. Send that amount of TON to the project’s <strong>Gifts</strong> wallet.</li>
<li>4. Paste the <strong>transaction hash</strong>, optionally add a <strong>message</strong>, and tap <strong>Send gift</strong>.</li>
<li><strong>Received / Sent:</strong> The same card shows <strong>Received</strong> (gifts you got) and <strong>Sent</strong> (gifts you sent). You can’t send a gift to yourself.</li>
</ul>
<hr/>
<h2>11. Referrals</h2>
<ul>
<li><strong>Use someone else’s code:</strong> Paste their code into <strong>Enter referral code</strong> and tap <strong>Apply</strong>. You (and they) may get NEUR bonuses; applying usually requires a <strong>connected wallet</strong> (anti-sybil). Each code is typically one-time per user/wallet.</li>
<li><strong>Note:</strong> If it says “Referral failed (already used? wallet required? invalid code?)”, check: wallet connected, code correct, and that you haven’t already used a referral.</li>
</ul>
<hr/>
<h2>12. Ads and Tasks</h2>
<ul>
<li><strong>Tasks:</strong> The app or backend may list <strong>tasks</strong> (e.g. daily quests or external links). Follow the instructions shown for each task; completion may grant rewards (implementation depends on the project).</li>
</ul>
<hr/>
<h2>13. Vault Inventory (Optional / Debug)</h2>
<ul>
<li>If “Claim on-chain” fails with “Vault inventory too low” or “insufficient TON,” an admin needs to top up the vault; you can use this section to confirm the state.</li>
</ul>
<hr/>
<h2>11. Troubleshooting</h2>
<table>
<thead><tr>
<th>Problem</th>
<th>What to do</th>
</tr></thead>
<tbody>
<tr>
<td>“Select a broker first”</td>
<td>Create a broker and select it in <strong>My brokers</strong> before <strong>Run battle</strong>.</td>
</tr>
<tr>
<td>“No energy” / “need X have Y”</td>
<td>Wait for energy to regen (e.g. 1 per minute), or try a different broker if you have one.</td>
</tr>
<tr>
<td>“Cooldown” / “retryAfterMs”</td>
<td>Wait the shown time before running another battle in the same arena/mode.</td>
</tr>
<tr>
<td>“Battle failed. Is backend running…?”</td>
<td>Backend may be down or not reachable; try again later or check project status.</td>
</tr>
<tr>
<td>“Wallet connected” never appears</td>
<td>Retry TonConnect; ensure wallet is unlocked and network is OK.</td>
</tr>
<tr>
<td>“Connect wallet first” when claiming</td>
<td>Connect TonConnect; the claim is tied to your wallet address.</td>
</tr>
<tr>
<td>“Connected wallet does not match claim recipient”</td>
<td>Reconnect the same wallet that was used when the claim was created.</td>
</tr>
<tr>
<td>“Claim expired”</td>
<td>Create a new claim (run a battle with auto-claim or use “Create claim” again).</td>
</tr>
<tr>
<td>“Vault inventory too low” / “insufficient TON”</td>
<td>Project must top up the vault; you can’t fix this from the app.</td>
</tr>
<tr>
<td>“No claim created” / “Could not create claim”</td>
<td>Backend may not have vault/oracle configured, or your AIBA balance is 0; check Balances and try again after earning more.</td>
</tr>
<tr>
<td>“Guild required” for guildWars</td>
<td>Join or create a guild, then run battle in <strong>guildWars</strong>.</td>
</tr>
<tr>
<td>“Referral failed (already used?…)”</td>
<td>Ensure wallet is connected, code is correct, and you haven’t already applied a referral.</td>
</tr>
<tr>
<td>“Create failed” / “TON payment verification failed” (create broker)</td>
<td>Ensure you sent the exact cost in TON to the correct wallet and paste the tx hash for that transfer; each tx hash can only be used once.</td>
</tr>
<tr>
<td>“txHash already used” (create broker / boost / gift)</td>
<td>That payment was already applied; use a new TON transfer and new tx hash for another action.</td>
</tr>
<tr>
<td>“recipient not found” (gift)</td>
<td>The Telegram ID or @username doesn’t exist in the system; they may need to open the app once.</td>
</tr>
<tr>
<td>“Gifts not configured” / “Create broker with TON not configured”</td>
<td>The project hasn’t set the wallet and cost in the backend; the feature is disabled.</td>
</tr>
</tbody></table>
<hr/>
<h2>15. Quick Checklist (First Session)</h2>
<ol>
<li>Connect wallet (TonConnect).</li>
<li>Create starter broker and select it.</li>
<li>Choose arena (e.g. prediction) and tap <strong>Run battle</strong>.</li>
<li>Check <strong>Battle result</strong> and <strong>Balances</strong> (NEUR and AIBA credits).</li>
<li>(Optional) Enable <strong>Auto-claim AIBA on battle</strong> and tap <strong>Claim on-chain</strong> after the next battle.</li>
<li>(Optional) Create/join a guild and try <strong>guildWars</strong>.</li>
<li>(Optional) Create referral code or apply a friend’s code.</li>
<li>(Optional) <strong>Market:</strong> Create a broker with TON (pay → paste tx hash) or list/buy brokers with AIBA.</li>
<li>(Optional) <strong>Wallet:</strong> Boost your profile (TON) or send a gift (TON) to another user.</li>
</ol>
<p>For more on <strong>how the game works</strong> (brokers, arenas, battles, economy, claims), see <strong>docs/GAME-EXPLAINED.md</strong>. For <strong>marketplace and all payments</strong> (TON + AIBA, Super Admin wallets), see <strong>docs/MARKETPLACE-AND-PAYMENTS-MASTER-PLAN.md</strong>.</p>
  </div>
</body>
</html>