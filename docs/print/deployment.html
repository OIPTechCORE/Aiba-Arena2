<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>deployment — Aiba Arena Docs</title>
  <link rel="stylesheet" href="../print.css"/>
</head>
<body>
  <div class="doc-header">
    <h1>deployment</h1>
    <p class="doc-meta no-print"><a href="index.html">← All docs</a></p>
  </div>
  <div class="doc-body">
<h1>Deployment (Testnet baseline)</h1>
<h2>Components</h2>
<ul>
<li><strong>Backend</strong>: Express — local/Render/Railway use <code>backend/server.js</code>; Vercel uses <code>backend/api/index.js</code> (serverless).</li>
<li><strong>Miniapp</strong>: Next.js (<code>miniapp/</code>) for Telegram Mini App</li>
<li><strong>Admin OS</strong>: Next.js (<code>admin-panel/</code>) for operators</li>
</ul>
<h2>Backend (Render/Railway)</h2>
<ul>
<li><strong>Root directory</strong>: <code>backend/</code></li>
<li><strong>Required env</strong>: copy from <code>backend/.env.example</code></li>
</ul>
<h3>Minimum env for testnet end-to-end</h3>
<ul>
<li><code>TELEGRAM_BOT_TOKEN</code> (production Telegram auth and push notifications, e.g. battle win)</li>
<li><code>BOOST_TON_WALLET</code> (TON wallet address that receives boost payments; boost cost: Admin → Economy <code>boostCostTonNano</code>)</li>
<li><code>LEADER_BOARD_WALLET</code> (Super Admin: receives TON when users pay to create a group; cost: Admin → Economy <code>createGroupCostTonNano</code>, 1–10 TON)</li>
<li><code>BOOST_GROUP_WALLET</code> (Super Admin: receives TON when users boost a group; cost: Admin → Economy <code>boostGroupCostTonNano</code>, 1–10 TON)</li>
<li><code>CREATED_BROKERS_WALLET</code> (Super Admin: receives TON when users pay to create a broker; cost: Admin → Economy <code>createBrokerCostTonNano</code>, 1–10 TON; broker is auto-listed on marketplace)</li>
<li><code>BOOST_PROFILE_WALLET</code> (Super Admin: receives TON when users pay to boost their profile; cost: Admin → Economy <code>boostProfileCostTonNano</code>, 1–10 TON)</li>
<li><code>GIFTS_WALLET</code> (Super Admin: receives TON when users send a gift; cost: Admin → Economy <code>giftCostTonNano</code>, 1–10 TON)</li>
<li><code>STARS_STORE_WALLET</code> (Super Admin: receives TON when users buy Stars with TON; cost: Admin → Economy <code>starsStorePackPriceTonNano</code>)</li>
<li><code>CAR_RACING_WALLET</code> (Super Admin: receives TON when users create a car with TON; cost: Admin → Economy <code>createCarCostTonNano</code>, 1–10 TON)</li>
<li><code>MOTORCYCLE_RACING_WALLET</code> (Super Admin: receives TON when users create a bike with TON; cost: Admin → Economy <code>createBikeCostTonNano</code>, 1–10 TON)</li>
<li><code>TELEGRAM_INITDATA_MAX_AGE_SECONDS</code> (recommended 300–900; set explicitly for mainnet)</li>
<li><code>BATTLE_SEED_SECRET</code></li>
<li><code>ADMIN_JWT_SECRET</code>, <code>ADMIN_EMAIL</code>, <code>ADMIN_PASSWORD_HASH</code> (required for production readiness checks; do not use plaintext password)</li>
<li>Vault/claim reads:</li>
<li>- <code>TON_PROVIDER_URL</code></li>
<li>- <code>TON_API_KEY</code></li>
<li>- <code>ARENA_VAULT_ADDRESS</code></li>
<li>- <code>AIBA_JETTON_MASTER</code></li>
<li>- <code>ORACLE_PRIVATE_KEY_HEX</code></li>
</ul>
<h3>Monitoring hooks</h3>
<ul>
<li>Metrics (Prometheus): <code>GET /metrics</code></li>
</ul>
<h2>Miniapp + Admin panel (Vercel)</h2>
<ul>
<li><strong>Output</strong>: Next.js (Vercel handles)</li>
</ul>
<h3>Env</h3>
<ul>
<li>Optional: <code>NEXT_PUBLIC_TONCONNECT_MANIFEST_URL</code> (miniapp; defaults to <code>/api/tonconnect-manifest</code>)</li>
</ul>
  </div>
</body>
</html>