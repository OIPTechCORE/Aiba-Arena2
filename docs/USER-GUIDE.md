# AIBA Arena — User Guide

This guide walks you through **how to play** AIBA Arena: from opening the app to earning NEUR and AIBA, withdrawing AIBA to your TON wallet, and using every tab and feature. **Nothing is omitted.**

### Contents

1. Opening the Game  
2. How the App Is Organized (Tabs)  
3. Connect Your Wallet  
4. Get Your First Broker  
5. Choose Arena and Run a Battle  
6. Balances (NEUR, AIBA, Stars, Diamonds)  
7. Guilds (Groups)  
8. Withdrawing AIBA to Your Wallet (On-Chain Claim)  
9. Marketplace (Create Broker, List, Buy, Boosts)  
10. Boost your profile  
11. Gifts  
12. Referrals  
13. Brokers Tab: Combine and Mint as NFT  
14. Leaderboard  
15. Charity (Unite for Good)  
16. University  
17. Updates (Announcements)  
18. Wallet Tab (Full Picture)  
19. Ads and Tasks  
20. Vault Inventory  
21. Troubleshooting  
22. Quick Checklist (First Session)

---

## 1. Opening the Game

- **Where:** AIBA Arena runs as a **Telegram Mini App**. Open it from a link or bot inside Telegram (e.g. from the project’s bot or a shared link).
- **Requirements:** Telegram account; optionally a TON wallet (TonConnect) if you want to withdraw AIBA on-chain.
- **First time:** You may see a **cinematic intro** (skip or watch) and a **tutorial** (steps for brokers, arena, battle). The app has a **tab bar** at the bottom: **Home**, **Brokers**, **Arenas**, **Guilds**, **Market**, **Charity**, **University**, **Updates**, **Wallet**. Tap a tab to switch. A **balance strip** at the top shows NEUR, AIBA credits, Stars, Diamonds, and a verified badge if you have one.

---

## 2. How the App Is Organized (Tabs)

| Tab | What’s there |
|-----|--------------|
| **Home** | TonConnect, Vault info, Arena & battle (pick broker, arena, Run battle), Battle result, Referrals, Leaderboard. |
| **Brokers** | My brokers (select, combine two for NEUR, mint one as NFT for AIBA). |
| **Arenas** | Arena selector, Run battle, Battle result (score, rewards, Stars/Diamond). |
| **Guilds** | Groups (leaderboard rank, create or join, pay TON to create if not top N, boost group with TON), My groups, deposit/withdraw broker. |
| **Market** | Create your broker (pay TON), Marketplace (list/buy brokers with AIBA), Boosts (buy reward multiplier with NEUR). |
| **Charity** | Unite for Good: campaigns, donate NEUR or AIBA, your impact, charity leaderboard. |
| **University** | Courses and modules, progress, graduate badge, mint course badge / full certificate (pay TON). |
| **Updates** | Announcements, status, support. |
| **Wallet** | Profile & badges, Boost your profile (TON), Gifts (TON), Daily reward (NEUR), Vault, Staking (AIBA), DAO (proposals, vote), on-chain claim, Stars & Diamonds. |

---

## 3. Connect Your Wallet (Recommended)

- **Why:** Your TON address is used to:
  - Save your progress (linked to Telegram + wallet).
  - **Withdraw AIBA** on-chain: claims are tied to your wallet; you send one transaction to the vault to receive AIBA jettons.
- **How:**
  1. Tap **TonConnect** (or “Connect wallet”).
  2. Choose your TON wallet (e.g. Tonkeeper, Telegram Wallet).
  3. Approve the connection in the wallet.
- **Result:** The app shows “Wallet connected.” The backend stores your address for claims. If you don’t connect, you can still play and earn NEUR/AIBA credits, but you won’t be able to withdraw AIBA to the chain until you connect.

---

## 4. Get Your First Broker

- **What:** A **broker** is your in-game agent. Each has stats (Intelligence, Speed, Risk), level, energy, and cooldowns.
- **Steps:**
  1. Tap **Create starter broker**.
  2. Wait for “Refresh brokers” to finish (or tap it once).
  3. In **My brokers**, you should see one broker (e.g. “#… | INT 50 SPD 50 RISK 50 | energy 10”).
- **Tip:** You can have multiple brokers later; for now one is enough. Select it in the **My brokers** dropdown before every battle.

---

## 5. Choose Arena and Run a Battle

- **Arena:** In the **Arena** dropdown you can choose:
  - **prediction** — favors Intelligence.
  - **simulation** — more balanced.
  - **strategyWars** — more Risk.
  - **guildWars** — requires guild membership; rewards split with guild.
- **League:** The app typically uses **rookie** by default. Pro/elite may require higher broker level and cost more energy/cooldown.
- **Run a battle:**
  1. Select **one broker** in My brokers.
  2. Select **arena** (and league if shown).
  3. Tap **Run battle**.
  4. Wait a moment; you’ll see **Battle result** with **Score**, **Reward AIBA (credits)**, and **Reward NEUR**. On a win you also earn **Stars** (every win) and **one Diamond** on your **first ever** win.
- **Limits:**
  - **Energy:** Each battle costs energy (e.g. 10–20 per battle). Energy regenerates over time (e.g. 1 per minute, cap 100). If you see “no energy,” wait or try again later.
  - **Cooldown:** After a battle in an arena, you must wait (e.g. 30–60 seconds) before the next battle in that same arena/mode.
- **Optional:** Check **Auto-claim AIBA on battle** if you want the server to prepare a claim right after the battle so you can withdraw that battle’s AIBA in one step (see section 8).

---

## 6. Balances (NEUR, AIBA, Stars, Diamonds)

- **Where:** The **balance strip** at the top of the app shows: **NEUR**, **AIBA credits**, **Stars**, **Diamonds**, and a **verified** (or other) badge if you have one.
- **NEUR:** Off-chain points. You earn them from battles, referrals, and **daily claim** (Wallet tab). Used for entry fees (if a mode has them), **combine brokers**, training, and referrals. They never leave the backend ledger.
- **AIBA credits:** Off-chain “credits” that represent withdrawable AIBA. You earn them from battles. Use for **upgrades**, **mint as NFT**, **marketplace** (list/buy), **staking**. To get **real AIBA** in your TON wallet, **create a claim** and then **Claim on-chain** (see section 8).
- **Stars:** Telegram Stars–style currency. You earn Stars from **every battle win**. Shown in the balance strip and in the Wallet tab.
- **Diamonds:** Premium TON ecosystem asset. You earn **one Diamond on your first win**. Shown in the balance strip and Wallet tab.
- **Refreshing:** Balances update after battles, claims, daily claim, staking, and marketplace actions. If a number looks stale, perform an action or switch tabs to refresh.

---

## 7. Guilds (Groups) — Optional

- **When:** Useful for **guildWars** arena and for sharing rewards with a group. In the app the tab is labeled **Guilds** and the feature is called **Groups**.
- **Your rank:** The Guilds tab shows **Your leaderboard rank** (e.g. #42 by score). **Top N** leaders (e.g. top 50) can **create a group for free**; everyone else must **pay TON** to create.
- **My groups:** Tap **Refresh my guilds** to load your memberships. In the **My guilds** dropdown you’ll see guild name, member count, vault NEUR, and boost count.
- **Create a group:**
  - If you’re in the **top N** (e.g. top 50): enter **Name** (3–24 characters) and optional **Bio**, then tap **Create**. No payment.
  - If you’re **not** in the top N: the app shows the **cost in TON** (e.g. 1–10 TON). Send that amount to the project’s **Leader Board** wallet, then **paste the transaction hash** in the box and tap **Create**. Refresh; select the new group.
- **Join a group:** Get the **Guild ID** from someone (e.g. from the group’s invite). Paste it into **Join guild** and tap **Join**. Anyone can join any group.
- **Boost a group:** To give a group more visibility, **pay TON** (cost shown, e.g. 1–10 TON) to the **Boost Group** wallet, then paste the **tx hash** next to that group and tap **Boost**. Each group shows its boost count.
- **Deposit / withdraw broker:** Select a **guild** and a **broker**, then tap **Deposit selected broker** to put that broker in the guild pool (for guild wars). Tap **Withdraw selected broker** to take it back. You must withdraw a broker before you can list it on the marketplace.
- **Guild Wars:** To play **guildWars** arena you must be in a guild. Part of the NEUR reward goes to the guild treasury (e.g. 20%); the rest to you.

---

## 8. Withdrawing AIBA to Your Wallet (On-Chain Claim)

To turn **AIBA credits** into **real AIBA jettons** in your TON wallet:

- **Prerequisites:**  
  - Wallet **connected** (TonConnect).  
  - Backend and vault configured (ARENA_VAULT_ADDRESS, AIBA_JETTON_MASTER, ORACLE_PRIVATE_KEY_HEX, TON provider). If not, “Create claim” or “Claim on-chain” may fail or show a message about backend config.
- **Two ways:**

### 8.1 Auto-claim after a battle

1. Check **Auto-claim AIBA on battle**.
2. Run a battle (with a connected wallet and enough AIBA credits from that battle).
3. If the backend returns a claim, you’ll see **On-chain claim** with vault, amount, seqno, validUntil.
4. Tap **Claim on-chain (TonConnect)**.
5. Your wallet opens: confirm sending the transaction to the **vault** (you pay a small TON fee for gas; the vault sends AIBA to you).
6. Wait for confirmation; the app may poll and show “Claim confirmed on-chain.”

### 7.2 Create claim manually, then claim on-chain

1. After one or more battles you have **AIBA credits** (see Balances).
2. In **On-chain claim**, in the “Create a claim” section:
   - Optionally enter an **Amount** (blank = all your AIBA credits).
   - Tap **Create claim**.
3. You’ll see vault, to, amount, seqno, validUntil (and the backend stores the signed claim).
4. Tap **Claim on-chain (TonConnect)**.
5. Confirm in your wallet (you send one tx to the vault; the vault sends AIBA to your address).
6. Wait for “Claim confirmed on-chain” (or use **Check claim status** if the app offers it).

- **Important:**
  - The **connected wallet** must match the claim’s **to** address. If you changed wallets, reconnect the correct one.
  - Claims have a **validUntil** time (e.g. 10 minutes). If it expires, create a new claim (e.g. run another battle or create claim again).
  - If you see “Vault inventory too low” or “Vault has insufficient TON,” the project needs to top up the vault; you can try again later.

---

## 8. Marketplace (Create Broker, List, Buy)

The **Market** tab is the unified marketplace. All payments here are in **TON** (to create a broker) or **AIBA** (to list and buy brokers). See [MARKETPLACE-AND-PAYMENTS-MASTER-PLAN.md](MARKETPLACE-AND-PAYMENTS-MASTER-PLAN.md) for the full plan.

### 8.1 Create your broker with TON

- **What:** Pay TON once to create a **new broker** that is **automatically listed** on the global marketplace. You get **global recognition** as the seller.
- **Where:** Market tab → **Create your broker (pay TON)** card (shown only when the feature is configured).
- **Steps:**
  1. Note the **cost** (e.g. 1–10 TON; set by admins).
  2. Send that exact amount of TON to the **wallet address** shown or communicated by the project (Super Admin “Created Brokers” wallet).
  3. After the transaction confirms, copy the **transaction hash** (tx hash).
  4. Paste the tx hash into the input and tap **Create broker**.
- **Result:** A new broker is created and listed on the marketplace at the default AIBA price. Everyone can see it; you appear as the seller.
- **Tip:** If you see “txHash already used,” that payment was already applied. Use a new TON payment for another broker.

### 8.2 List and buy brokers (AIBA)

- **List:** Select one of **your** brokers (not in a guild pool), enter a **price in AIBA**, and tap **List**. Your broker appears globally. Withdraw it from a guild first if it’s deposited there.
- **Buy:** Browse **listings** and tap **Buy** on a listing. You pay in **AIBA**; the broker is transferred to you. Your AIBA balance is debited.
- **Refresh:** Tap **Refresh** to load the latest listings.

---

## 9. Boost your profile

- **What:** Pay TON to **boost your profile** so you get higher visibility (e.g. “Boosted” badge, better placement).
- **Where:** Wallet tab → **Boost your profile** card (shown when the feature is configured).
- **Steps:**
  1. Note the **cost** (e.g. 1–10 TON).
  2. Send that amount of TON to the project’s **Boost Profile** wallet.
  3. Paste the **transaction hash** and tap **Boost profile**.
- **Result:** Your profile is boosted until the configured end date. The Profile card shows “Profile boosted until &lt;date&gt;.”

---

## 11. Gifts

- **What:** Send a **gift** to another user by paying TON. The recipient sees it in “Gifts received”; you see yours in “Gifts sent.”
- **Where:** Wallet tab → **Gifts** card.
- **Send a gift:**
  1. Enter the recipient: **Telegram ID** (numeric) or **@username**.
  2. Note the **cost** (e.g. 1–10 TON per gift).
  3. Send that amount of TON to the project’s **Gifts** wallet.
  4. Paste the **transaction hash**, optionally add a **message**, and tap **Send gift**.
- **Received / Sent:** The same card shows **Received** (gifts you got) and **Sent** (gifts you sent). You can’t send a gift to yourself.

---

## 12. Referrals

- **Create your code:** Tap **Create my referral code**. Your code appears (e.g. uppercase). Share it with friends.
- **Use someone else’s code:** Paste their code into **Enter referral code** and tap **Apply**. You (and they) may get NEUR bonuses; applying usually requires a **connected wallet** (anti-sybil). Each code is typically one-time per user/wallet.
- **Note:** If it says “Referral failed (already used? wallet required? invalid code?)”, check: wallet connected, code correct, and that you haven’t already used a referral.

---

## 13. Brokers Tab: Combine and Mint as NFT

- **My brokers:** In the **Brokers** tab you see all brokers you own. **Select** one in the dropdown to use it in battles (and for combine or mint).
- **Combine brokers:** Pick a **base** broker and a **sacrifice** broker. The base keeps blended stats and XP; the sacrifice is removed. Cost: **NEUR** (amount shown, e.g. 50). Tap **Combine**. Useful to merge two weak brokers into one stronger one.
- **Mint as NFT:** Select one broker and tap **Mint as NFT**. Cost: **AIBA** (amount shown). The backend queues a **mint job**; when an admin completes it, the broker is linked to an on-chain NFT. Status appears in the app.

---

## 14. Leaderboard

- **Where:** **Home** tab → **Leaderboard** card.
- **What:** Global ranks by **score**, **AIBA**, **NEUR**, or **battles** (dropdown). You see the top players; the list is the same for everyone worldwide. Your **my-rank** (e.g. “Your leaderboard rank: #42”) is shown in the **Guilds** tab and is used to decide if you can create a group for free (top N) or must pay TON.

---

## 15. Charity (Unite for Good)

- **Where:** **Charity** tab.
- **What:** **Active campaigns** (e.g. education, health, community). Each campaign has a name, description, cause, and progress (NEUR + AIBA raised, donor count). You can **donate** NEUR and/or AIBA from your balance to a campaign; optional message and anonymous option.
- **Your impact:** The tab shows how much you’ve donated (NEUR, AIBA, impact score) and per-campaign breakdown.
- **Charity leaderboard:** Optional leaderboard of donors by impact.

---

## 16. University

- **Where:** **University** tab.
- **What:** **Courses** and **modules** (learning content). You see your **progress** (e.g. X of Y modules completed). Tapping a module can mark it complete (POST progress). When you complete all, you get a **graduate** badge.
- **Mint course badge / full certificate:** After completing requirements, you can **mint** a course completion badge or full course certificate by **paying TON** (cost shown). Send TON to the configured wallet, paste the tx hash, and submit. See the University tab for the exact flow and wallet.

---

## 17. Updates (Announcements)

- **Where:** **Updates** tab.
- **What:** **Announcements** from the project (title, body, type). Stay informed about news, status, and support. No action required; read and dismiss.

---

## 18. Wallet Tab (Full Picture)

The **Wallet** tab contains:

- **Profile:** Your **badges** (e.g. Verified, Early Adopter, Top Leader, University Graduate). If you **boosted your profile** (pay TON), it shows “Profile boosted until &lt;date&gt;.”
- **Boost your profile:** See section 10. Pay TON → paste tx hash.
- **Gifts:** See section 11. Send/received/sent.
- **Daily reward:** **Claim daily** to receive **NEUR** once per day (amount set by the project). If you already claimed today, the button shows “Claimed.”
- **Vault:** Vault address and TON/jetton balance (for debugging or checking claim capacity).
- **Staking:** **Stake** AIBA (lock in the pool), **Unstake**, or **Claim** staking reward. APY and pending reward are shown. Staking is off-chain; rewards are in AIBA.
- **DAO:** **Create** a proposal (title, description) or **vote** on active proposals (Vote For / Vote Against). Proposals can be closed and executed (treasury payout) by the project.
- **On-chain claim:** When you have a battle with a claim (or you created one manually), this card shows vault, amount, seqno, validUntil and **Claim on-chain (TonConnect)** / **Check claim status**. See section 8.
- **Stars and Diamonds:** Display of your Stars and Diamonds balances (earned from battles).

---

## 19. Ads and Tasks

- **Ads:** After some battles you may see a **Sponsored** image/link. Tapping it opens the advertiser’s link (in Telegram or browser). This doesn’t change your balances.
- **Tasks:** The app or backend may list **tasks** (e.g. daily quests or external links). Follow the instructions shown for each task; completion may grant rewards (implementation depends on the project).

---

## 20. Vault Inventory (Optional / Debug)

- **Vault inventory** shows the vault’s TON balance and AIBA (jetton) balance. It’s mainly for checking whether the vault has enough to pay claims and enough TON for gas.
- If “Claim on-chain” fails with “Vault inventory too low” or “insufficient TON,” an admin needs to top up the vault; you can use this section to confirm the state.

---

## 21. Troubleshooting

| Problem | What to do |
|--------|------------|
| “Select a broker first” | Create a broker and select it in **My brokers** before **Run battle**. |
| “No energy” / “need X have Y” | Wait for energy to regen (e.g. 1 per minute), or try a different broker if you have one. |
| “Cooldown” / “retryAfterMs” | Wait the shown time before running another battle in the same arena/mode. |
| “Battle failed. Is backend running…?” | Backend may be down or not reachable; try again later or check project status. |
| “Wallet connected” never appears | Retry TonConnect; ensure wallet is unlocked and network is OK. |
| “Connect wallet first” when claiming | Connect TonConnect; the claim is tied to your wallet address. |
| “Connected wallet does not match claim recipient” | Reconnect the same wallet that was used when the claim was created. |
| “Claim expired” | Create a new claim (run a battle with auto-claim or use “Create claim” again). |
| “Vault inventory too low” / “insufficient TON” | Project must top up the vault; you can’t fix this from the app. |
| “No claim created” / “Could not create claim” | Backend may not have vault/oracle configured, or your AIBA balance is 0; check Balances and try again after earning more. |
| “Guild required” for guildWars | Join or create a guild, then run battle in **guildWars**. |
| “Referral failed (already used?…)” | Ensure wallet is connected, code is correct, and you haven’t already applied a referral. |
| “Create failed” / “TON payment verification failed” (create broker) | Ensure you sent the exact cost in TON to the correct wallet and paste the tx hash for that transfer; each tx hash can only be used once. |
| “txHash already used” (create broker / boost / gift) | That payment was already applied; use a new TON transfer and new tx hash for another action. |
| “recipient not found” (gift) | The Telegram ID or @username doesn’t exist in the system; they may need to open the app once. |
| “Gifts not configured” / “Create broker with TON not configured” | The project hasn’t set the wallet and cost in the backend; the feature is disabled. |
| “Combine failed” / “insufficient NEUR” | Ensure you have enough NEUR (battles, daily claim, referrals); select two different brokers (base and sacrifice). |
| “Mint failed” / “insufficient AIBA” | You need enough AIBA credits (battles, marketplace sell); one broker at a time for mint. |
| “Stake failed” / “Unstake failed” | Check AIBA balance for stake; for unstake, amount must be ≤ staked amount. |
| “Daily claim failed” / “Already claimed today” | You can claim daily NEUR only once per day (UTC). Wait until the next day. |
| “Vote failed” / “Create failed” (DAO) | Proposal may be closed; check you’re voting on an active proposal or that title is non-empty for create. |
| “Donate failed” (charity) | Check campaign is active; ensure you have enough NEUR/AIBA and selected a campaign. |

---

## 22. Quick Checklist (First Session)

1. Open AIBA Arena in Telegram (skip intro/tutorial if shown).
2. Connect wallet (TonConnect).
3. Create starter broker and select it in **My brokers**.
4. Choose arena (e.g. prediction) and tap **Run battle**.
5. Check **Battle result** and **Balances** (NEUR, AIBA, Stars, Diamonds).
6. (Optional) **Wallet** → **Claim daily** for NEUR.
7. (Optional) Enable **Auto-claim AIBA on battle** and tap **Claim on-chain** after the next battle (Wallet tab when claim is ready).
8. (Optional) **Guilds:** Check your rank; create or join a group (pay TON if not top N); try **guildWars** arena.
9. (Optional) Create referral code or apply a friend’s code (**Home** tab).
10. (Optional) **Market:** Create a broker with TON (pay → paste tx hash) or list/buy brokers with AIBA; buy a boost (NEUR).
11. (Optional) **Wallet:** Boost your profile (TON), send a gift (TON), stake AIBA, or vote in DAO.
12. (Optional) **Charity:** Donate NEUR or AIBA to a campaign. **University:** Complete modules, mint badge/certificate (TON). **Updates:** Read announcements.

For **how the game works** (brokers, arenas, economy, claims), see **GAME-EXPLAINED.md**. For **marketplace and all payments** (TON + AIBA, Super Admin wallets), see **MARKETPLACE-AND-PAYMENTS-MASTER-PLAN.md**. For **leaderboard and groups** (top N, pay TON), see **LEADERBOARD-AND-GROUPS-CHECK.md**.
